apiVersion: v1
kind: Secret
metadata:
  name: arc-github-app-secret
  namespace: actions-runner-system
type: Opaque
stringData:
  # Populate from Vault or secure store
  github_app_id: ""
  github_app_installation_id: ""
  github_app_private_key: ""
---
apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: foundation-runners
  namespace: actions-runner-system
spec:
  replicas: 2
  template:
    spec:
      repository: InfinityXoneSystems/foundation
      # Or use organization: InfinityXoneSystems
      labels:
        - self-hosted
        - linux
        - x64
      githubAPICredentialsFrom:
        secretRef:
          name: arc-github-app-secret
      resources:
        requests:
          cpu: 500m
          memory: 512Mi
        limits:
          cpu: 2
          memory: 2Gi
      # Optional: enforce policy-compliant runner images
      # image: ghcr.io/actions/actions-runner:latest
      # Security: limit runner privileges
      securityContext:
        runAsNonRoot: true
        runAsUser: 1000
        fsGroup: 1000
